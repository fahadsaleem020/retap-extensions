import e from"@tiptap/extension-code-block-lowlight";import{Extension as t,ReactNodeViewRenderer as r,NodeViewWrapper as o,Node as n,mergeAttributes as i}from"@tiptap/react";import a from"@tiptap/extension-youtube";import{useToken as s,Box as l,Image as d}from"@chakra-ui/react";import{RetapToolbar as u}from"@retap/toolbar";import{useRetap as m}from"@retap/provider";import p,{useState as c}from"react";import{useNode as b}from"@retap/hooks";import g from"@tiptap/extension-image";const h=e.extend({name:"codeBlockLowLight"}),f=t.create({name:"textIndent",addGlobalAttributes(){const e=this.options.HTMLAttributes;return[{types:["textStyle"],attributes:{marginLeft:{default:null,parseHTML:e=>e.style.marginLeft.replace(/['"]+/g,""),renderHTML:t=>t.marginLeft?{style:`margin-left: ${t.marginLeft}`,...e}:{}}}}]},addCommands(){return{increaseIndent:(e,t)=>({chain:r})=>{let o=parseInt(this.editor.getAttributes("textStyle").marginLeft?.split("px")[0]??"0");if(o===t)return!1;const n=o+(e??0);return r().setMark("textStyle",{marginLeft:n+"px"}).run()},decreaseIndent:e=>({chain:t})=>{let r=parseInt(this.editor.getAttributes("textStyle").marginLeft?.split("px")[0]??"0");const o=r-e;return r&&o?t().setMark("textStyle",{marginLeft:o+"px"}).removeEmptyTextStyle().run():t().unsetMark("textStyle").run()}}}}),L=t.create({name:"fontSize",addGlobalAttributes(){const e=this.options.HTMLAttributes;return[{types:["textStyle"],attributes:{fontSize:{default:null,parseHTML:e=>e.style.fontSize.replace(/['"]+/g,""),renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`,...e}:{}}}}]},addCommands:()=>({setFontSize:e=>({chain:t})=>t().setMark("textStyle",{fontSize:e+"px"}).run()})});let M={shadow:"xl",p:2,position:"absolute",left:"50%",transform:"translateX(-50%)",top:1,rounded:"md",gap:1,zIndex:2,alignItems:"center",bg:"white"};const x=a.extend({addAttributes(){return{...this.parent?.(),width:{default:"100%",renderHTML:e=>({width:`${e.width}`})},height:{default:500,renderHTML:e=>({height:`${e.height}`})},margin:{default:"auto",renderHTML:e=>({style:`margin: ${e.margin}`})}}},addNodeView:()=>r(y),draggable:!0,inline:!1}),y=e=>{const{youtube:t}=m();b(t,e);const[r]=s("colors",["blue.500"]),[n,i]=c(!1),{selected:a,extension:{options:d},editor:{isEditable:g},node:{attrs:h}}=e,f=`https://www.youtube.com/embed/${h.src.split("?")[1].split("=")[1]}?start=${h.start}`;return p.createElement(o,null,p.createElement(l,{className:"youtubeNodeContainer",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1)},p.createElement(l,{as:"iframe",w:h.width,m:h.margin,h:h.height,src:f,allowFullScreen:d.allowFullscreen,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",style:{border:a?`2px solid ${r}`:"none"},...d.HTMLAttributes}),g&&n&&t?.menuProps?.buttons?.length&&p.createElement(u,{editor:e.editor,buttons:t.menuProps?.buttons,buttonProps:t.menuProps?.buttonProps,fallback:t.menuProps?.fallback,...M,...t.menuProps.styles})))},w=g.extend({draggable:!0,inline:!1,addAttributes(){return{...this.parent?.(),width:{default:"auto",renderHTML:e=>({width:`${e.width}`})},height:{default:"auto",renderHTML:e=>({height:`${e.height}`})},margin:{default:"auto",renderHTML:e=>({style:`margin: ${e.margin}`})},sources:{default:void 0}}},addNodeView:()=>r(T)}),T=e=>{const{image:t}=m();b(t,e);const{selected:r,extension:{options:n},editor:{isEditable:i},node:{attrs:a}}=e,s=e.node.attrs,[g,h]=c(!1);return p.createElement(o,null,p.createElement(l,{className:"imageNodeContainer",onMouseEnter:()=>r&&h(!0),onMouseLeave:()=>r&&h(!1)},i&&g&&r&&t?.menuProps?.buttons?.length&&p.createElement(u,{buttonProps:t.menuProps.buttonProps,fallback:t.menuProps.fallback,buttons:t.menuProps.buttons,editor:e.editor,...M,...t.menuProps.styles}),p.createElement(d,{onMouseMove:()=>r&&!g&&h(!0),border:r?"2px":void 0,title:s.title,w:a.width,m:a.margin,h:a.height,alt:s.alt,src:s.src,borderColor:"blue.500",zIndex:1,...n.HTMLAttributes})))},H=n.create({addOptions:()=>({HTMLAttributes:{className:"video",preload:"metadata",controls:!0}}),addAttributes:()=>({title:{default:void 0},src:{default:void 0},width:{default:"100%",renderHTML:e=>({width:`${e.width}`})},height:{default:"auto",renderHTML:e=>({height:`${e.height}`})},margin:{default:"auto",renderHTML:e=>({style:`margin: ${e.margin}`})},sources:{default:void 0}}),addCommands:()=>({setVideo:({src:e,sources:t,title:r})=>({commands:o})=>{const n=t?JSON.stringify(t):void 0;return o.insertContent(`<video  sources=${n}  src=${e} title=${r?.trim().length?r:"video"} />`)}}),parseHTML:()=>[{tag:"video",getAttrs:()=>null}],renderHTML({HTMLAttributes:e}){return["video",i(e,this.options.HTMLAttributes)]},addNodeView:()=>r(v),draggable:!0,group:"block",name:"video",atom:!0}),v=e=>{const{video:t}=m();b(t,e);const{selected:r,extension:{options:n},editor:{isEditable:i},node:{attrs:a}}=e,[s,d]=c(!1);return p.createElement(o,null,p.createElement(l,{className:"videoNodeContainer",onMouseLeave:()=>d(!1),onMouseEnter:()=>d(!0)},i&&s&&r&&t?.menuProps?.buttons?.length&&p.createElement(u,{buttonProps:t.menuProps.buttonProps,fallback:t.menuProps.fallback,buttons:t.menuProps.buttons,editor:e.editor,...M,...t.menuProps.styles}),p.createElement(l,{as:"video",border:r?"2px":void 0,borderColor:"blue.500",title:a.title,m:a.margin,h:a.height,src:a.src,w:a.width,zIndex:1,...n.HTMLAttributes})))};export{h as CodeBlockLowlight,L as FontSize,w as Image,f as TextIndent,H as Video,x as Youtube};
//# sourceMappingURL=index.esm.js.map
